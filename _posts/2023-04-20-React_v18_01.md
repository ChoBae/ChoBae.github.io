---
layout: post
title: React v18 í†ºì•„ë³´ê¸° 1í¸ - useTransition
date: 2023-04-20 23:00:00 +0900
categories: [React]
tags: [React, React v18]
description: React, ë¦¬ì•¡íŠ¸, React v18, useTransition
toc: true
math: true
mermaid: true
# image:
#   src: /assets/img/ts-thum.png
#   width: 1000   # in pixels
#   height: 400   # in pixels
#   alt: íƒ€ì…ìŠ¤í¬ë¦½íŠ¸
---

<!-- ì¸ë„¤ì¼ -->

<figure style="text-align:center">
  <img src="https://user-images.githubusercontent.com/101175828/233267934-5e05b876-755b-4647-a33a-663ff1aef461.png"/>
  <figcaption><a href="https://velog.io/@heelieben/%EA%B0%9C%EB%B0%9C%EC%A7%84%EC%8A%A4-%EC%A7%A4-%EB%8D%B0%EB%A0%A4%EA%B0%80%EC%84%B8%EC%9A%94">í”¼ê·¸ë¯¸ë‹˜ ë²¨ë¡œê·¸</a></figcaption>
</figure>

> React v18 useTransitionë¥¼ í†ºì•„ë³´ì ğŸ¤—

# â­ï¸ useTransition

---

<figure style="text-align:center">
  <img src="https://user-images.githubusercontent.com/101175828/233431767-3212cf26-dbe8-43c3-8539-6348d667dc48.jpg"/>
  <figcaption>ì œê°€ ì¢€ ë°”ë¹ ì„œìš”..</figcaption>
</figure>

`useTransition`ì€ í•œë§ˆë””ë¡œ **ë™ì‘ì— ìš°ì„ ìˆœìœ„ë¥¼ ë¶€ì—¬**í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.  
ì´ì „ì˜ ë¦¬ì•¡íŠ¸ì—ëŠ” **ë‹¹ì¥ ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ë™ì‘ì´ ìˆì–´ë„ ì‹¤í–‰ì¤‘ì¸ ë™ì‘ì´ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸°**í•´ì•¼ í–ˆë‹¤.  
í•˜ì§€ë§Œ React v18ì˜ `useTransition` ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ **ë™ì‘ì— ìš°ì„ ìˆœìœ„ë¥¼ ë¶€ì—¬**í•˜ë©°, `Concurrent` í•˜ê²Œ ë™ì‘í•˜ê²Œ í•œë‹¤.
ì‚¬ì‹¤ ìì„¸íˆ ë³´ìë©´ `useTrasition`ì„ ë¶€ì—¬í•œ ë™ì‘ì„ ìš°ì„ ìˆœìœ„ë¥¼ ë¯¸ë£¨ê³ , ë‹¤ë¥¸ ë™ì‘ì„ ë¨¼ì € ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.  
ì•„ë˜ì˜ ì˜ˆì‹œëŠ” ê²€ìƒ‰ì°½ì˜ ì¸í’‹ ê°’ì„ ê²€ìƒ‰ ê²°ê³¼ì— ë°˜ì˜í•˜ëŠ” ì˜ˆì‹œì¸ë° ì´ ê¸°ëŠ¥ì„ ì†Œê°œí•˜ëŠ”ë° ì•„ì£¼ ì ì ˆí•˜ë‹¤.  
ì¸í’‹ ê°’ì´ ë³€ê²½ ë ë•Œë§ˆë‹¤ ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆ˜ì‹­ë§Œê±´ìœ¼ë¡œ ê°€ì •í•´ë³´ì•˜ë‹¤.  
ì•„ë˜ì˜ ì§¤ë¡œ ì¤€ë¹„í•´ë†¨ì§€ë§Œ ì§ì ‘ ê²½í—˜í•´ë³´ê³  ì‹¶ì„ ê²ƒ ê°™ì•„ì„œ ë°°í¬í•´ë†¨ë‹¤.  
[useTransition í…ŒìŠ¤íŠ¸ì¥](https://react-v18.vercel.app/useTransition) ìœ¼ë¡œ ê°€ì„œ ì§ì ‘ ê²½í—˜í•´ë³´ê¸¸ ğŸ¤—

## ì½”ë“œ

```tsx
import { useState, useTransition } from "react";
const dummy = ["ì´ê²Œ", "ë°”ë¡œ", "ì§€ì˜¥ì´ë‹¤"];
const UseTransition = () => {
  const [isChecked, setIsChecked] = useState(false);
  const [input, setInput] = useState("");
  const [searchResult, setSearchResult] = useState<string[]>([...Array(5000)]);
  const [isPending, startTransition] = useTransition();
  const handleInput = (e: React.ChangeEvent<HTMLInputElement>) => {
    setInput(e.target.value);
    if (isChecked) {
      // useTransition ì ìš©
      startTransition(() => {
        const newArray = searchResult.map(
          (_, index) => dummy[index % dummy.length] + Math.random()
        );
        setSearchResult(newArray);
      });
    } else {
      // useTransition ë¯¸ì ìš©
      const newArray = searchResult.map(
        (_, index) => dummy[index % dummy.length] + Math.random()
      );
      setSearchResult(newArray);
    }
  };

  const handleCheckbox = (e: React.ChangeEvent<HTMLInputElement>) => {
    setIsChecked(e.target.checked);
  };

  return (
    <FunctionContainer>
      <h1>useTransition í…ŒìŠ¤íŠ¸ì¥</h1>
      <CheckboxContainer>
        <input onChange={handleCheckbox} type="checkbox" id="exampleCheckbox" />
        <CheckboxLabel htmlFor="exampleCheckbox">
          useTransition ì ìš©í•˜ê¸°
        </CheckboxLabel>
      </CheckboxContainer>
      <SearchInput onChange={handleInput} type="text" placeholder="Search..." />
      <ResultList>
        {isPending && <div>Loading...</div>}
        {searchResult.map((item) => (
          <ResultItem>{item}</ResultItem>
        ))}
      </ResultList>
    </FunctionContainer>
  );
};
```

## ì ìš© ì „

---

<figure style="text-align:center">
  <img src="https://user-images.githubusercontent.com/101175828/233430566-3edbf021-6663-406c-84fc-bcb43afb1c9f.gif"/>
  <figcaption>ì¸í’‹ ê°’ì´ ë²„ë²…ì´ë©´ì„œ ì…ë ¥ëœë‹¤.</figcaption>
</figure>

ì…ë ¥ ê°’ì´ ë°”ë€”ë•Œ ë§ˆë‹¤ ì•„ë˜ì— ìˆ˜ì‹­ë§Œê±´ì˜ ê²€ìƒ‰ê²°ê³¼ê°€ ë Œë”ë§ëœë‹¤.  
ë¦¬ì•¡íŠ¸ëŠ” **ë Œë”ë§ ë™ì‘ì´ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸°**í•´ì•¼í•˜ê³ , ë§ˆì¹œ í›„ì—ì•¼ ì¸í’‹ ê°’ì´ ë°”ë€Œê¸° ë•Œë¬¸ì— ì¸í’‹ ê°’ì´ ë²„ë²…ì´ë©´ì„œ ì…ë ¥ëœë‹¤.  
ì§¤ë¡œë§Œ ë´ë„ ì‹¬ê°í•œ ìˆ˜ì¤€ì˜ ë²„ë²…ì„ì´ ëŠê»´ì§€ëŠ”ë° ì‹¤ì œ ì„œë¹„ìŠ¤ë¼ë©´ ë”ì°í•˜ë‹¤.  
ì‚¬ìš©ìëŠ” ê²€ìƒ‰ì°½ì— ì›í•˜ëŠ” ê°’ì„ ì…ë ¥í• í…ë° ê²€ìƒ‰ì°½ì˜ ê°’ì´ ì¦‰ê°ì ìœ¼ë¡œ ë°”ë€ŒëŠ”ê²Œ ì•„ë‹ˆë¼ ëŠê²¨ì„œ ì…ë ¥ë˜ëŠ” ê²ƒì„ ëŠê»´ì•¼ í•œë‹¤.  
ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ í•´ê²°ì‚¬ `useTransition`ì„ ì‚¬ìš©í•´ `Concurrent` í•œ ë™ì‘ì„ ì‹œì¼œë³´ì ğŸ’«

## ì ìš© í›„

---

<figure style="text-align:center">
  <img src="https://user-images.githubusercontent.com/101175828/233430557-fc1fe4b2-f8c2-44bd-b1cf-17914670cbfe.gif"/>
  <figcaption>ì¸í’‹ ê°’ì´ ê¹”ë”í•˜ê²Œ ì…ë ¥ëœë‹¤.</figcaption>
</figure>

ìœ„ì˜ ì½”ë“œì—ì„œ ì ìš©ëœ ë¶€ë¶„ì„ í•œë²ˆ ë³´ì.

```tsx
// useTransition ì ìš©
startTransition(() => {
  const newArray = searchResult.map(
    (_, index) => dummy[index % dummy.length] + Math.random()
  );
  setSearchResult(newArray);
});
```

`startTransition`ì„ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ì˜ ì½œë°±í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ëŠ” ì‹œì ì„ ì˜ë„ì ìœ¼ë¡œ ë¯¸ë£° ìˆ˜ ìˆê³ , ìš°ì„  ìˆœìœ„ì— ë”°ë¼ ì‘ì—…ì„ ë²ˆê°ˆì•„ê°€ë©´ì„œ ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ `Concurrent`í•œ ë™ì‘ì´ ê°€ëŠ¥í•˜ë‹¤.  
ì§¤ì„ ë³´ê²Œë˜ë©´ ì…ë ¥ê°’ì´ ê¹”ë”í•˜ê²Œ ì…ë ¥ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.  
ë˜ ìì„¸íˆë³´ë©´ ì…ë ¥ ê°’ì´ ë³€ê²½ ë ë•Œë§ˆë‹¤ `Loading...`ì´ë¼ëŠ” ë¬¸êµ¬ê°€ ë Œë”ë§ ë˜ëŠ”ë° ì´ëŠ” `useTransition`ì´ `isPending`ì´ë¼ëŠ” ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.  
`isPending`ì€ `startTransition`ì´ ì‹¤í–‰ë˜ë©´ `true`ê°€ ë˜ê³ , `startTransition`ì´ ì‹¤í–‰ëœ ì½œë°±í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©´ `false`ê°€ ëœë‹¤.

```tsx
  const [isPending, startTransition] = useTransition();
  return(
    {isPending && <div>Loading...</div>}
  )
```

ì¦‰, startTransitionì„ ì‚¬ìš©í•´ì„œ ë¯¸ë¤„ì§„ ë™ì‘ì´ ì‹¤í–‰ë˜ê¸° ì „ì— ë‹¤ë¥¸ ë™ì‘ì´ ì‹¤í–‰ë˜ë©´ `Loading...`ì´ë¼ëŠ” ë¬¸êµ¬ë¥¼ ë Œë”ë§ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤.  
ì—¬ê¸°ê¹Œì§€ `useTransition`ì„ ì‚¬ìš©í•´ì„œ `Concurrent`í•œ ë™ì‘ì„ ì²´í—˜í•´ë³´ì•˜ê³ , ê¸€ì´ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤.  

# ğŸ™ğŸ» ì°¸ê³  Reference

---

- ë¦¬ì•¡íŠ¸ ê³µì‹ ë¸”ë¡œê·¸ - [React v18](https://react.dev/blog/2022/03/29/react-v18)
- Tecoble - [ì‚¬ìš©ì ê²½í—˜ ê°œì„  2í¸ - react concurrent mode ](https://tecoble.techcourse.co.kr/post/2021-07-24-concurrent-mode/)
